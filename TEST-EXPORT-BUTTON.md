# 🧪 วิธีทดสอบปุ่ม "ส่งออก GeoJSON"

**วันที่**: 21 พฤศจิกายน 2025  
**ผู้แก้ไข**: Team W  
**Issue**: ปุ่ม "ส่งออก GeoJSON" ไม่ทำงาน

---

## ✅ การแก้ไขที่ทำไปแล้ว

### 1. เพิ่ม Console Logs
- เพิ่ม `console.log` ใน `handleExportGeoJSON` เพื่อ debug
- จะแสดงข้อมูล:
  - จำนวนหมู่บ้านทั้งหมด
  - จำนวนหมู่บ้านที่มีขอบเขต
  - สถานะการเปิด Modal

### 2. เพิ่ม z-index สูงขึ้น
- เปลี่ยน `z-index: 10000` เป็น `z-index: 99999 !important`
- เพื่อให้ Modal แสดงทับทุกอย่าง

### 3. เพิ่ม Inline Styles
- เพิ่ม `cursor: pointer` และ `pointerEvents: auto`
- เพื่อให้แน่ใจว่าปุ่มคลิกได้

### 4. เพิ่ม Tooltip
- เพิ่ม `title` attribute
- แสดงคำอธิบายเมื่อ hover

---

## 🧪 วิธีทดสอบ

### Step 1: เปิด Browser Console
1. เปิด Chrome DevTools (F12)
2. ไปที่ tab "Console"
3. Clear console (Ctrl+L)

### Step 2: คลิกปุ่ม "ส่งออก GeoJSON"
1. ไปที่หน้า "กำหนดขอบเขตหมู่บ้าน"
2. คลิกปุ่ม "📥 ส่งออก GeoJSON" ที่มุมขวาบน
3. ดูที่ Console

### Step 3: ตรวจสอบ Console Output

**ถ้าปุ่มทำงาน จะเห็น:**
```
🔍 Export button clicked!
📊 Total villages: X
✅ Villages with boundaries: Y
✅ Modal should open now!
```

**ถ้าไม่มีข้อมูล จะเห็น:**
```
🔍 Export button clicked!
📊 Total villages: X
✅ Villages with boundaries: 0
```
และจะมี toast error: "ไม่มีข้อมูลขอบเขตให้ส่งออก"

### Step 4: ตรวจสอบ Modal

**ถ้า Modal เปิด:**
- จะเห็นหน้าจอมืดทึบ (overlay)
- กล่อง Modal สีขาวตรงกลาง
- รายการหมู่บ้านที่มีขอบเขต
- ปุ่ม "✅ เลือกทั้งหมด" และ "❌ ยกเลิกทั้งหมด"

**ถ้า Modal ไม่เปิด:**
- ตรวจสอบ Console มี error หรือไม่
- ตรวจสอบว่ามีหมู่บ้านที่มีขอบเขตหรือไม่

---

## 🐛 Troubleshooting

### ปัญหา 1: คลิกปุ่มแล้วไม่มีอะไรเกิดขึ้น

**สาเหตุที่เป็นไปได้:**
1. ไม่มีข้อมูลหมู่บ้าน
2. ไม่มีหมู่บ้านที่มีขอบเขต
3. JavaScript error

**วิธีแก้:**
1. เช็ค Console มี error หรือไม่
2. เช็คว่ามีข้อมูลหมู่บ้านหรือไม่ (ดูที่ตาราง)
3. Refresh หน้าเว็บ (Ctrl+F5)

### ปัญหา 2: Modal เปิดแต่มองไม่เห็น

**สาเหตุที่เป็นไปได้:**
1. z-index ต่ำเกินไป
2. CSS ไม่โหลด
3. Element ถูกซ่อนด้วย CSS อื่น

**วิธีแก้:**
1. เช็ค DevTools > Elements
2. หา element `.modal-overlay`
3. ดู computed styles ว่า `display: flex` และ `z-index: 99999`

### ปัญหา 3: Console แสดง "Villages with boundaries: 0"

**สาเหตุ:**
- ยังไม่มีหมู่บ้านที่วาดขอบเขต

**วิธีแก้:**
1. ไปที่ tab "🗺️ แผนที่"
2. วาดขอบเขตหมู่บ้านอย่างน้อย 1 หมู่
3. บันทึก
4. ลองคลิกปุ่มส่งออกอีกครั้ง

---

## 📋 Checklist สำหรับ J

- [ ] เปิด Browser Console
- [ ] คลิกปุ่ม "📥 ส่งออก GeoJSON"
- [ ] เช็ค Console มี log ขึ้นหรือไม่
- [ ] เช็ค Modal เปิดหรือไม่
- [ ] ถ้า Modal เปิด - ลองเลือกหมู่บ้าน
- [ ] ลองคลิก "📥 ส่งออก"
- [ ] เช็คว่าไฟล์ถูกดาวน์โหลดหรือไม่

---

## 📸 Screenshot ที่ควรเห็น

### 1. ปุ่มส่งออก
```
┌─────────────────────────────────────┐
│ 🏛️ แก้ไขขอบเขตตำบล │ 📥 ส่งออก GeoJSON │
└─────────────────────────────────────┘
```

### 2. Modal ที่เปิดขึ้น
```
┌──────────────────────────────────────────┐
│ 📥 ส่งออกขอบเขตหมู่บ้าน              ✕ │
├──────────────────────────────────────────┤
│ เลือกหมู่บ้านที่ต้องการส่งออก           │
│                                          │
│ ✅ เลือกทั้งหมด  ❌ ยกเลิกทั้งหมด      │
│ เลือกแล้ว: 0 / 10 หมู่                  │
│                                          │
│ ┌────────────────────────────────────┐  │
│ │ ☐ 🟥 หมู่ 1 - บ้านแม่สาว          │  │
│ │ ☐ 🔵 หมู่ 2 - บ้านสันทราย         │  │
│ │ ☐ 🟢 หมู่ 3 - บ้านป่าไผ่          │  │
│ └────────────────────────────────────┘  │
│                                          │
│         ❌ ยกเลิก    📥 ส่งออก ทั้งหมด │
└──────────────────────────────────────────┘
```

### 3. Console Output
```
🔍 Export button clicked!
📊 Total villages: 10
✅ Villages with boundaries: 8
✅ Modal should open now!
```

---

## 🎯 Expected Result

เมื่อทดสอบสำเร็จ:
1. ✅ คลิกปุ่มแล้ว Console แสดง log
2. ✅ Modal เปิดขึ้น
3. ✅ เห็นรายการหมู่บ้าน
4. ✅ เลือกหมู่บ้านได้
5. ✅ คลิก "ส่งออก" แล้วไฟล์ดาวน์โหลด
6. ✅ ไฟล์ชื่อ `village-boundaries-selected-X-2025-11-21.geojson`

---

## 📞 ติดต่อ

ถ้ายังมีปัญหา ส่ง screenshot มาที่:
- Console output
- Network tab (ถ้ามี error)
- Elements tab (แสดง modal element)

**Team W พร้อมช่วย!** 🚀
