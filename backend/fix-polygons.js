const fs = require('fs');

const file = 'd:/Guardian-Route-main/backend/prisma/villages-with-geojson-seed.ts';
let content = fs.readFileSync(file, 'utf8');

// Fix polygons with only 5 points (4 unique + 1 closing) to have 6 points (5 unique + 1 closing)
// Pattern: Rectangle with 4 corners -> Pentagon with 5 corners

const fixes = [
  // Village 6-20 patterns
  { 
    old: `[99.2540, 19.9300],
          [99.2660, 19.9300],
          [99.2660, 19.9200],
          [99.2540, 19.9200],
          [99.2540, 19.9300],`,
    new: `[99.2540, 19.9300],
          [99.2660, 19.9300],
          [99.2660, 19.9230],
          [99.2600, 19.9200],
          [99.2540, 19.9230],
          [99.2540, 19.9300],`
  },
  {
    old: `[99.2140, 19.9050],
          [99.2260, 19.9050],
          [99.2260, 19.8950],
          [99.2140, 19.8950],
          [99.2140, 19.9050],`,
    new: `[99.2140, 19.9050],
          [99.2260, 19.9050],
          [99.2260, 19.8980],
          [99.2200, 19.8950],
          [99.2140, 19.8980],
          [99.2140, 19.9050],`
  },
  {
    old: `[99.2250, 19.9100],
          [99.2350, 19.9100],
          [99.2350, 19.9000],
          [99.2250, 19.9000],
          [99.2250, 19.9100],`,
    new: `[99.2250, 19.9100],
          [99.2350, 19.9100],
          [99.2350, 19.9030],
          [99.2300, 19.9000],
          [99.2250, 19.9030],
          [99.2250, 19.9100],`
  },
  {
    old: `[99.2380, 19.9360],
          [99.2520, 19.9360],
          [99.2520, 19.9240],
          [99.2380, 19.9240],
          [99.2380, 19.9360],`,
    new: `[99.2380, 19.9360],
          [99.2520, 19.9360],
          [99.2520, 19.9270],
          [99.2450, 19.9240],
          [99.2380, 19.9270],
          [99.2380, 19.9360],`
  },
  {
    old: `[99.2050, 19.9340],
          [99.2150, 19.9340],
          [99.2150, 19.9260],
          [99.2050, 19.9260],
          [99.2050, 19.9340],`,
    new: `[99.2050, 19.9340],
          [99.2150, 19.9340],
          [99.2150, 19.9280],
          [99.2100, 19.9260],
          [99.2050, 19.9280],
          [99.2050, 19.9340],`
  },
  {
    old: `[99.2300, 19.9000],
          [99.2400, 19.9000],
          [99.2400, 19.8900],
          [99.2300, 19.8900],
          [99.2300, 19.9000],`,
    new: `[99.2300, 19.9000],
          [99.2400, 19.9000],
          [99.2400, 19.8930],
          [99.2350, 19.8900],
          [99.2300, 19.8930],
          [99.2300, 19.9000],`
  },
  {
    old: `[99.2490, 19.9150],
          [99.2610, 19.9150],
          [99.2610, 19.9050],
          [99.2490, 19.9050],
          [99.2490, 19.9150],`,
    new: `[99.2490, 19.9150],
          [99.2610, 19.9150],
          [99.2610, 19.9080],
          [99.2550, 19.9050],
          [99.2490, 19.9080],
          [99.2490, 19.9150],`
  },
  {
    old: `[99.2000, 19.9140],
          [99.2100, 19.9140],
          [99.2100, 19.9060],
          [99.2000, 19.9060],
          [99.2000, 19.9140],`,
    new: `[99.2000, 19.9140],
          [99.2100, 19.9140],
          [99.2100, 19.9080],
          [99.2050, 19.9060],
          [99.2000, 19.9080],
          [99.2000, 19.9140],`
  },
  {
    old: `[99.2350, 19.9040],
          [99.2450, 19.9040],
          [99.2450, 19.8960],
          [99.2350, 19.8960],
          [99.2350, 19.9040],`,
    new: `[99.2350, 19.9040],
          [99.2450, 19.9040],
          [99.2450, 19.8980],
          [99.2400, 19.8960],
          [99.2350, 19.8980],
          [99.2350, 19.9040],`
  },
  {
    old: `[99.2600, 19.9090],
          [99.2700, 19.9090],
          [99.2700, 19.9010],
          [99.2600, 19.9010],
          [99.2600, 19.9090],`,
    new: `[99.2600, 19.9090],
          [99.2700, 19.9090],
          [99.2700, 19.9030],
          [99.2650, 19.9010],
          [99.2600, 19.9030],
          [99.2600, 19.9090],`
  },
  {
    old: `[99.2450, 19.8940],
          [99.2550, 19.8940],
          [99.2550, 19.8860],
          [99.2450, 19.8860],
          [99.2450, 19.8940],`,
    new: `[99.2450, 19.8940],
          [99.2550, 19.8940],
          [99.2550, 19.8880],
          [99.2500, 19.8860],
          [99.2450, 19.8880],
          [99.2450, 19.8940],`
  },
  {
    old: `[99.2650, 19.9240],
          [99.2750, 19.9240],
          [99.2750, 19.9160],
          [99.2650, 19.9160],
          [99.2650, 19.9240],`,
    new: `[99.2650, 19.9240],
          [99.2750, 19.9240],
          [99.2750, 19.9180],
          [99.2700, 19.9160],
          [99.2650, 19.9180],
          [99.2650, 19.9240],`
  },
  {
    old: `[99.2100, 19.8950],
          [99.2200, 19.8950],
          [99.2200, 19.8850],
          [99.2100, 19.8850],
          [99.2100, 19.8950],`,
    new: `[99.2100, 19.8950],
          [99.2200, 19.8950],
          [99.2200, 19.8880],
          [99.2150, 19.8850],
          [99.2100, 19.8880],
          [99.2100, 19.8950],`
  },
  {
    old: `[99.2200, 19.8890],
          [99.2300, 19.8890],
          [99.2300, 19.8810],
          [99.2200, 19.8810],
          [99.2200, 19.8890],`,
    new: `[99.2200, 19.8890],
          [99.2300, 19.8890],
          [99.2300, 19.8830],
          [99.2250, 19.8810],
          [99.2200, 19.8830],
          [99.2200, 19.8890],`
  },
  {
    old: `[99.2550, 19.9000],
          [99.2650, 19.9000],
          [99.2650, 19.8900],
          [99.2550, 19.8900],
          [99.2550, 19.9000],`,
    new: `[99.2550, 19.9000],
          [99.2650, 19.9000],
          [99.2650, 19.8930],
          [99.2600, 19.8900],
          [99.2550, 19.8930],
          [99.2550, 19.9000],`
  },
];

fixes.forEach(fix => {
  content = content.replace(fix.old, fix.new);
});

fs.writeFileSync(file, content);
console.log('âœ… Fixed all polygons to have proper structure (5 unique points + 1 closing point)');
