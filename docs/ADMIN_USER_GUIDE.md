# 📖 Admin User Guide - Village Boundaries Management

**Guardian Route System**  
**Version:** 1.0  
**Last Updated:** November 18, 2025

---

## 🎯 Overview

ระบบจัดการขอบเขตหมู่บ้าน (Village Boundaries Management) เป็นเครื่องมือสำหรับผู้ดูแลระบบในการกำหนดและจัดการขอบเขตทางภูมิศาสตร์ของหมู่บ้านทั้ง 20 หมู่ในตำบลเวียง อำเภอฝาง จังหวัดเชียงใหม่

---

## 🚀 Quick Start

### การเข้าถึงระบบ

1. **เข้าสู่ระบบ** ด้วยบัญชี Admin
2. ไปที่เมนู **"🌐 กำหนดขอบเขตหมู่บ้าน"**
3. เลือกแท็บ **"🗺️ แผนที่"**

---

## 🗺️ การวาดขอบเขตหมู่บ้าน

### ขั้นตอนการวาดขอบเขตใหม่

#### **Step 1: เตรียมการวาด**
```
1. คลิกปุ่ม "✏️ วาดขอบเขตใหม่" หรือ "🏛️ แก้ไขขอบเขตตำบล"
2. ระบบจะแสดงเครื่องมือวาดบนแผนที่
```

#### **Step 2: เลือกประเภทแผนที่**
```
🗺️ ประเภทแผนที่ (อยู่เหนือแผนที่):
○ แผนที่ถนน (Street Map) - เหมาะสำหรับดูถนนและชื่อสถานที่
○ ภาพถ่ายดาวเทียม (Satellite) - เหมาะสำหรับดูภูมิประเทศจริง
○ ภาพถ่าย + ชื่อ (Hybrid) - รวมทั้งสองแบบ
```

#### **Step 3: ปักหมุดพิกัดอ้างอิง (Optional)**
```
📍 ปักหมุดพิกัดอ้างอิง:
1. กรอก Latitude (ละติจูด) เช่น 19.93842280996853
2. กรอก Longitude (ลองจิจูด) เช่น 99.23076089434804
3. กรอกชื่อจุด เช่น "จุดเริ่มต้นหมู่ 1"
4. คลิก "🎯 ปักหมุด"

การใช้งานหมุด:
- คลิก "🔍 ไป" เพื่อบินไปยังตำแหน่งหมุด
- คลิก "🗑️ ลบ" เพื่อลบหมุด (มี confirmation)
```

#### **Step 4: วาดขอบเขต**
```
เครื่องมือวาด:
🔷 Polygon - วาดรูปหลายเหลี่ยม (แนะนำ)
🔶 Rectangle - วาดสี่เหลี่ยม
⭕ Circle - วาดวงกลม
📏 Polyline - วาดเส้น

วิธีวาด Polygon:
1. คลิกบนแผนที่เพื่อวางจุดแรก
2. คลิกต่อเนื่องเพื่อวางจุดถัดไป
3. คลิกที่จุดแรกอีกครั้งเพื่อปิดรูป
4. หรือดับเบิลคลิกเพื่อปิดรูปอัตโนมัติ
```

#### **Step 5: บันทึกขอบเขต**
```
💾 บันทึกขอบเขตที่วาด:
1. กรอก "ชื่อขอบเขต" เช่น "หมู่ 1 - หนองตุ้ม"
2. เลือก "ประเภทขอบเขต":
   - 🏛️ ขอบเขตตำบลเวียง
   - หมู่ 1, หมู่ 2, ... หมู่ 20
3. คลิก "💾 บันทึกขอบเขต"
4. รอ toast notification "บันทึกขอบเขตหมู่ X สำเร็จ"
5. รายการจะอัปเดตทันที
```

---

## 🎨 ระบบสีขอบเขต (Color-Coded System)

### สีของแต่ละหมู่บ้าน

แต่ละหมู่บ้านจะมีสีเฉพาะตัวเพื่อง่ายต่อการแยกแยะ:

```
🔴 หมู่ 1  - Red          🔵 หมู่ 2  - Blue
🟢 หมู่ 3  - Green        🟠 หมู่ 4  - Orange
🟣 หมู่ 5  - Purple       🔷 หมู่ 6  - Turquoise
🟧 หมู่ 7  - Carrot       ⚫ หมู่ 8  - Dark Gray
🟩 หมู่ 9  - Green Sea    🔺 หมู่ 10 - Dark Red
🟢 หมู่ 11 - Nephritis    🔹 หมู่ 12 - Belize Hole
🟪 หมู่ 13 - Wisteria     🟡 หมู่ 14 - Yellow
🟠 หมู่ 15 - Pumpkin      ⚪ หมู่ 16 - Asbestos
🩷 หมู่ 17 - Pink         🔵 หมู่ 18 - Cyan
🟢 หมู่ 19 - Light Green  🟧 หมู่ 20 - Deep Orange
```

### การใช้งาน Legend

```
🎨 สีขอบเขตหมู่บ้าน (อยู่เหนือแผนที่):
- แสดงรายการหมู่บ้านที่มีขอบเขตแล้ว
- แสดงสีของแต่ละหมู่
- คลิก "👁️ ซ่อน" เพื่อซ่อน legend
- คลิก "👁️‍🗨️ แสดง" เพื่อแสดง legend
```

---

## ✏️ การแก้ไขขอบเขต

### แก้ไขขอบเขตหมู่บ้าน

```
1. ไปที่รายการขอบเขตด้านล่าง
2. คลิกปุ่ม "✏️" ในคอลัมน์ "จัดการ"
3. ระบบจะโหลดขอบเขตเดิมขึ้นมา
4. แก้ไขขอบเขตตามต้องการ
5. คลิก "✏️ บันทึกการแก้ไข"
```

### แก้ไขขอบเขตตำบล

```
1. คลิกปุ่ม "🏛️ แก้ไขขอบเขตตำบล" ที่ด้านบน
2. ระบบจะซ่อนขอบเขตหมู่บ้านเพื่อความชัดเจน
3. วาดหรือแก้ไขขอบเขตตำบล
4. บันทึกเหมือนขอบเขตหมู่บ้าน
```

---

## 🗑️ การลบขอบเขต

### ⚠️ คำเตือนสำคัญ

**การลบขอบเขตเป็นการกระทำที่ไม่สามารถย้อนกลับได้!**

### ขั้นตอนการลบ

```
1. ไปที่รายการขอบเขตด้านล่าง
2. คลิกปุ่ม "🗑️" ในคอลัมน์ "จัดการ"
3. ระบบจะแสดง confirmation dialog:
   
   ⚠️ ยืนยันการลบขอบเขต
   
   หมู่ X - ชื่อหมู่บ้าน
   
   ⚠️ คำเตือน:
   ขอบเขตจะถูกลบอย่างถาวร และไม่สามารถกู้คืนได้!
   
   [❌ ยกเลิก]  [🗑️ ยืนยันลบขอบเขต]

4. คลิก "🗑️ ยืนยันลบขอบเขต" เพื่อยืนยัน
5. หรือคลิก "❌ ยกเลิก" เพื่อยกเลิก
```

### Safety Features

- ✅ ต้องยืนยันทุกครั้งก่อนลบ
- ✅ แสดงข้อมูลที่จะลบชัดเจน
- ✅ ปุ่มยกเลิกเป็นค่าเริ่มต้น (ปลอดภัย)
- ✅ ปุ่มยืนยันเป็นสีแดง (เตือนอันตราย)

---

## 🗺️ Georeference Tool

### การใช้งานเครื่องมือ Georeference

เครื่องมือนี้ใช้สำหรับนำภาพแผนที่หรือภาพถ่ายทางอากาศมาทาบบนแผนที่ดิจิทัล

#### **Step 1: อัปโหลดภาพ**
```
1. คลิก "📁 เลือกไฟล์ภาพ"
2. เลือกไฟล์ภาพ (JPG, PNG, GIF)
3. รอระบบโหลดภาพ
```

#### **Step 2: ปรับตำแหน่ง**
```
🎯 ปรับตำแหน่งภาพ:
- ลากหมุดสีแดงเพื่อเลื่อนภาพ
- ใช้ slider "ความโปร่งใส" เพื่อปรับความโปร่งแสง
- ใช้ slider "ขนาด" เพื่อปรับขนาดภาพ
- ใช้ slider "หมุน" เพื่อหมุนภาพ
```

#### **Step 3: วาดขอบเขต**
```
1. ปรับภาพให้ตรงกับแผนที่
2. ใช้เครื่องมือวาดเพื่อวาดขอบเขตตามภาพ
3. บันทึกขอบเขตตามปกติ
```

#### **Step 4: ลบภาพ**
```
1. คลิก "🗑️ ลบภาพอ้างอิง"
2. ยืนยันการลบ (มี confirmation)
```

---

## 📊 รายการขอบเขต

### ตารางแสดงข้อมูล

```
┌──────┬─────────────┬──────────────┬─────────────┬─────────┐
│ หมู่ │ ชื่อหมู่บ้าน│ พิกัดกลาง    │ สถานะ       │ จัดการ  │
├──────┼─────────────┼──────────────┼─────────────┼─────────┤
│ 🔴 1 │ หนองตุ้ม    │ 19.9384,     │ ✅ มีขอบเขต │ 👁️ ✏️ 🗑️│
│      │             │ 99.2308      │             │         │
├──────┼─────────────┼──────────────┼─────────────┼─────────┤
│   2  │ ป่าบง       │ -            │ ⚠️ ยังไม่มี │         │
│      │             │              │ ขอบเขต      │         │
└──────┴─────────────┴──────────────┴─────────────┴─────────┘
```

### คำอธิบายคอลัมน์

- **หมู่**: หมายเลขหมู่ (มีสีถ้ามีขอบเขต)
- **ชื่อหมู่บ้าน**: ชื่อหมู่บ้าน
- **พิกัดกลาง**: พิกัดจุดกลางของขอบเขต (Lat, Lng)
- **สถานะ**: 
  - ✅ มีขอบเขต - มีขอบเขตแล้ว
  - ⚠️ ยังไม่มีขอบเขต - ยังไม่มีขอบเขต
- **จัดการ**:
  - 👁️ ดู - ดูขอบเขตบนแผนที่
  - ✏️ แก้ไข - แก้ไขขอบเขต
  - 🗑️ ลบ - ลบขอบเขต (มี confirmation)

---

## 📱 การใช้งานบนมือถือ

### Mobile-Friendly Interface

ระบบออกแบบมาให้ใช้งานบนมือถือได้สะดวก:

#### **1. External Controls**
```
✅ ควบคุมแผนที่อยู่นอกแผนที่ (ด้านบน)
✅ ไม่บังการทำงานบนแผนที่
✅ ปุ่มใหญ่ แตะง่าย
✅ Responsive design
```

#### **2. Touch Gestures**
```
- แตะ: เลือก/วางจุด
- ลาก: เลื่อนแผนที่
- Pinch: ซูมเข้า/ออก
- ดับเบิลแตะ: ซูมเข้า
```

#### **3. Mobile Tips**
```
💡 Tips สำหรับมือถือ:
- ใช้ภาพถ่ายดาวเทียมเพื่อความชัดเจน
- ซูมให้ใกล้ก่อนวาด
- ใช้หมุดพิกัดเป็นจุดอ้างอิง
- บันทึกบ่อยๆ
```

---

## 📤 การส่งออกข้อมูล

### Export GeoJSON

```
1. คลิกปุ่ม "📥 ส่งออก GeoJSON" ที่ด้านบน
2. ระบบจะดาวน์โหลดไฟล์ GeoJSON
3. ชื่อไฟล์: village-boundaries-YYYY-MM-DD.geojson
4. ใช้ไฟล์นี้กับโปรแกรม GIS อื่นๆ ได้
```

### รูปแบบข้อมูล

```json
{
  "type": "FeatureCollection",
  "features": [
    {
      "type": "Feature",
      "properties": {
        "villageNo": 1,
        "name": "หนองตุ้ม"
      },
      "geometry": {
        "type": "Polygon",
        "coordinates": [[...]]
      }
    }
  ]
}
```

---

## ⚠️ ข้อควรระวัง

### Do's ✅

- ✅ บันทึกบ่อยๆ ขณะวาด
- ✅ ใช้หมุดพิกัดเป็นจุดอ้างอิง
- ✅ ตรวจสอบขอบเขตก่อนบันทึก
- ✅ ใช้ภาพถ่ายดาวเทียมเพื่อความแม่นยำ
- ✅ ส่งออก GeoJSON เป็นสำรอง

### Don'ts ❌

- ❌ อย่าลบโดยไม่ยืนยัน
- ❌ อย่าวาดขอบเขตทับซ้อนกัน
- ❌ อย่าใช้รูปทรงที่ซับซ้อนเกินไป
- ❌ อย่าลืมเลือกหมู่บ้านก่อนบันทึก
- ❌ อย่าปิดหน้าต่างขณะกำลังบันทึก

---

## 🆘 การแก้ปัญหา

### ปัญหาที่พบบ่อย

#### **1. บันทึกไม่สำเร็จ**
```
สาเหตุ:
- ไม่ได้เลือกหมู่บ้าน
- ไม่ได้กรอกชื่อขอบเขต
- ขอบเขตไม่ถูกต้อง (ไม่ปิดรูป)

วิธีแก้:
1. ตรวจสอบว่าเลือกหมู่บ้านแล้ว
2. กรอกชื่อขอบเขต
3. ตรวจสอบว่าขอบเขตปิดรูปแล้ว
4. ลองบันทึกอีกครั้ง
```

#### **2. รายการไม่อัปเดต**
```
สาเหตุ:
- การเชื่อมต่อขาดหาย
- ข้อมูลไม่ถูกบันทึกลง database

วิธีแก้:
1. Refresh หน้าเว็บ (F5)
2. ตรวจสอบการเชื่อมต่ออินเทอร์เน็ต
3. ลองบันทึกอีกครั้ง
```

#### **3. หมุดไม่แสดง**
```
สาเหตุ:
- พิกัดไม่ถูกต้อง
- พิกัดอยู่นอกขอบเขตแผนที่

วิธีแก้:
1. ตรวจสอบรูปแบบพิกัด (Lat, Lng)
2. ตรวจสอบว่าพิกัดอยู่ในพื้นที่ตำบลเวียง
3. ลองปักหมุดใหม่
```

---

## 📞 ติดต่อสอบถาม

หากพบปัญหาหรือต้องการความช่วยเหลือ:

- **Developer Team**: Team W
- **System Admin**: SA
- **Testing Team**: J

---

## 📝 บันทึกการอัปเดต

### Version 1.0 (November 18, 2025)
- ✅ ระบบวาดและบันทึกขอบเขต
- ✅ ระบบหมุดพิกัดอ้างอิง
- ✅ ระบบสีขอบเขต (20 สี)
- ✅ Mobile-friendly interface
- ✅ Delete confirmations
- ✅ Georeference tool
- ✅ Export GeoJSON

---

**จัดทำโดย:** Team W  
**สำหรับ:** Guardian Route System  
**วันที่:** November 18, 2025
